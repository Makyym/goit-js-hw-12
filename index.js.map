{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/main.js","../src/js/render-functions.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function searchFetch(searchValue, page) {\n    const params = new URLSearchParams({\n        key: \"46092367-b3ded390d3bc77cfd15f53989\",\n        q: searchValue,\n        image_type: \"photo\",\n        safesearch: true,\n        orientation: \"horizontal\",\n        page: page,\n        per_page: 15,\n    });\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${params}`);\n        return response.data;\n    }\n    catch(error) {\n\t\tconsole.log(error);\n    }\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\nimport { searchFetch } from \"./js/pixabay-api.js\";\nimport { createGallery } from \"./js/render-functions.js\";\n\nexport const divEl = document.querySelector(\".gallery-section\");\nconst fetchPostsBtn = document.querySelector(\".load-btn\");\nconst formEl = document.querySelector(\"form\");\nconst inputEl = formEl.elements.input;\nconst buttonEl = formEl.elements.button;\nconst loaderEl = document.querySelector(\".loader-element\");\nconst galleryGrid = new SimpleLightbox('.gallery-section a', {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\nlet page = 1;\nlet userSearch = \"\";\nlet totalHits = 0;\n\nfunction handleSearch(event) {\n    event.preventDefault();\n    page = 1;\n    fetchPostsBtn.classList.replace(\"is-visible\", \"non-visible\");\n    if (inputEl.value.trim() === \"\") {\n        iziToast.error({\n            backgroundColor: \"#EF4040\",\n            progressBarColor: \"#FFBEBE\",\n            position: \"topCenter\",\n            messageColor: \"#FFFFFF\",\n            icon: \"\",\n            message: `Please fill in the input field`,\n            position: `topRight`,\n        });\n    } else {\n        divEl.textContent = \"\";\n        loaderEl.classList.replace(\"non-visible\", \"is-visible\");\n        const searchValue = inputEl.value.trim();\n        searchFetch(searchValue, page)\n            .then(images => {\n                if (images.hits.length === 0) {\n                    iziToast.error({\n                        backgroundColor: \"#EF4040\",\n                        progressBarColor: \"#FFBEBE\",\n                        position: \"topCenter\",\n                        messageColor: \"#FFFFFF\",\n                        icon: false,\n                        position: `topRight`,\n                        message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    });\n                    loaderEl.classList.replace(\"is-visible\", \"non-visible\");\n                    return;\n                } else {\n                    divEl.insertAdjacentHTML(\"beforeend\", createGallery(images.hits));\n                    galleryGrid.refresh();\n                    loaderEl.classList.replace(\"is-visible\", \"non-visible\");\n                    userSearch = searchValue;\n                    totalHits = images.totalHits;\n                    divEl.insertAdjacentElement(\"afterend\", loaderEl);\n                    if (totalHits < 15) {\n                        iziToast.error({\n                            backgroundColor: \"#EF4040\",\n                            progressBarColor: \"#FFBEBE\",\n                            position: \"topCenter\",\n                            messageColor: \"#FFFFFF\",\n                            icon: false,\n                            position: `topRight`,\n                            message: \"We're sorry, but you've reached the end of search results.\",\n                        })\n                        fetchPostsBtn.classList.replace(\"is-visible\", \"non-visible\");\n                        return\n                    };\n                    fetchPostsBtn.classList.replace(\"non-visible\", \"is-visible\");\n                }\n            })\n            .catch(error => console.log(error));\n    };\n}\n\nformEl.addEventListener(\"submit\", () => handleSearch(event));\n\nfetchPostsBtn.addEventListener(\"click\", async () => {\n    try {\n        loaderEl.classList.replace(\"non-visible\", \"is-visible\");\n        let elementPerPage = 15;\n        const totalPages = Math.ceil(totalHits / elementPerPage);\n        page += 1;\n        console.log(totalPages);\n        console.log(page);\n        console.log(totalHits);\n        const gallery = await searchFetch(userSearch, page);\n        loaderEl.classList.replace(\"is-visible\", \"non-visible\");\n        divEl.insertAdjacentHTML(\"beforeend\", createGallery(gallery.hits));\n        const galleryBox = document.querySelector(\".img-card\");\n        const imgCardHeight = 2 * galleryBox.getBoundingClientRect().height;\n        window.scrollBy({\n            top: imgCardHeight,\n            left: 0,\n            behavior: \"smooth\",\n        });\n        galleryGrid.refresh();\n        if (page === totalPages) {\n            iziToast.error({\n                backgroundColor: \"#EF4040\",\n                progressBarColor: \"#FFBEBE\",\n                position: \"topCenter\",\n                messageColor: \"#FFFFFF\",\n                icon: false,\n                position: `topRight`,\n                message: \"We're sorry, but you've reached the end of search results.\",\n            })\n            fetchPostsBtn.classList.replace(\"is-visible\", \"non-visible\");\n            return;\n        }\n    } catch (error) {\n        console.log(error);\n    }\n});","import { divEl } from \"../main.js\";\n\nexport function createGallery(values) {\n    const gallery = values.reduce((acc, value) => {\n        const galleryItem = `<li class=\"img-card\">\n        <a href=\"${value.largeImageURL}\">\n        <img src=\"${value.webformatURL}\" alt=\"${value.tags}\" />\n        <ul>\n        <li>\n        <h3>Likes</h3>\n        <p>${value.likes}</p>\n        </li>\n        <li>\n        <h3>Views</h3>\n        <p>${value.views}</p>\n        </li>\n        <li>\n        <h3>Comments</h3>\n        <p>${value.comments}</p>\n        </li>\n        <li>\n        <h3>Downloads</h3>\n        <p>${value.downloads}</p>\n        </li>\n        </ul>\n        </a>\n        </li>`;\n        return acc + galleryItem;\n    }, ``);\n    return gallery;\n};"],"names":["searchFetch","searchValue","page","params","axios","error","divEl","fetchPostsBtn","formEl","inputEl","loaderEl","galleryGrid","SimpleLightbox","userSearch","totalHits","handleSearch","event","iziToast","images","createGallery","totalPages","gallery","imgCardHeight","values","acc","value","galleryItem"],"mappings":"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"}